(window.webpackJsonp=window.webpackJsonp||[]).push([[86,92],{"+871":function(module,e,t){"use strict";t.r(e),t.d(e,"PracticeQuizAttemptPage",function(){return O}),t.d(e,"withRedirectToCover",function(){return q});var n=t("VbXa"),a=t.n(n),r=t("DXTi"),s=t.n(r),i=t("MnCE"),o=t("EqTq"),u=t("m10x"),c=t("+LJP"),d=t("usGt"),m=t("sQ/U"),l=t("JEIr"),p=t("oe9u"),f=t("/oRK"),I=t("XFHP"),g=t("22Sa"),b=t("eK4/"),v=t("Gpyo"),y=t("xmEj"),S=t("RH4a"),D=t("zaiP"),h=t("wIYG"),R=t("4QSv"),P=t("VtNW"),Q=t.n(P),z=t("3AUy"),E=t.n(z),j=Object(o.a)("PracticeQuizAttemptPage"),O=function(e){function PracticeQuizAttemptPage(){return e.apply(this,arguments)||this}a()(PracticeQuizAttemptPage,e);var t=PracticeQuizAttemptPage.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.shouldRedirectToCover,n=e.redirectToCover;t&&n()},t.render=function render(){var e=this.props,t=e.redirectToCover,n=e.addRedirectToCoverToRouteParams,a=e.examSessionId;return s.a.createElement(D.a,null,function(e){var r=e.item;if(!r)return null;return s.a.createElement(g.a,{onClose:t,ariaLabel:Q()("Practice Quiz"),backbuttonAriaLabel:Q()("Back to the Course"),headerLeft:s.a.createElement(p.a,{headerText:r.name,itemTypeText:Q()("Practice Quiz"),timeCommitment:r.timeCommitment}),headerRight:s.a.createElement(f.a,{deadline:r.deadline}),topBanner:s.a.createElement(l.a,{slug:r.courseSlug,itemId:r.id,userId:m.a.get().id},function(e){var n=e.bestEvaluation;return s.a.createElement(v.b,{slug:r.courseSlug,itemId:r.id,userId:m.a.get().id,fetchPolicy:"network-only",examSessionId:a},function(e){var a=e.isSubmitted,i,o=(r.contentSummary&&"quiz"===r.contentSummary.typeName&&r.contentSummary.definition||{}).passingFraction,u=n||{},c=u.score,d=void 0===c?0:c,m=u.maxScore,l=void 0===m?0:m,p=n?l&&d/l:void 0,f=p?p>=o:void 0;if(a&&o&&"number"==typeof p)return s.a.createElement(R.a,{passingFraction:o,itemGrade:{grade:p,isPassed:f||!1,isOverridden:!1,latePenaltyRatio:null},onKeepLearningClick:t,onTryAgainClick:t});return null})})},s.a.createElement(v.b,{slug:r.courseSlug,itemId:r.id,userId:m.a.get().id,fetchPolicy:"network-only",examSessionId:a},function(e){var t=e.loading,a=e.practiceQuizFormData,i=e.sessionId,o=e.nextSubmissionDraftId,c=e.totalPoints,d=e.isSubmitted,m=e.hasDraft;if(t||!a)return s.a.createElement(h.a,null);var l=a.map(function(e){return e.prompt.id});return s.a.createElement(S.a,{itemId:r.id,courseId:r.courseId},function(e){var t=e.stepState,p=e.setStepState;return s.a.createElement("div",{className:j()},s.a.createElement("div",{className:j("header")},s.a.createElement(u.d,null,r.name),s.a.createElement(u.a,{rootClassName:j("points")},s.a.createElement(u.h,{tag:"span"},Q()("Total points #{totalPoints}",{totalPoints:c})))),s.a.createElement("div",{className:j("prompts")},a.map(function(e,n){return s.a.createElement(b.a,{key:e.prompt.id,quizQuestion:e,index:n,isReadOnly:!!d,isDisabled:!!(t||{}).isSaving||!!(t||{}).isSubmitting})})),!d&&s.a.createElement(y.a,{ids:l,sessionId:i,nextSubmissionDraftId:o},function(e){var a=e.saveDraft,i=e.autoSaveDraft,o=e.submitDraft;return s.a.createElement(I.a,{itemId:r.id,courseId:r.courseId,saveDraft:a,autoSaveDraft:i,submitDraft:function submitDraft(){return o?o().then(function(){n()}):Promise.reject()},hasDraft:m,stepState:t,setStepState:p})}))})}))})},PracticeQuizAttemptPage}(s.a.Component),q=Object(i.compose)(d.a,Object(c.a)(function(e,t){var n=t.refetchPracticeQuizCoverPageData,a=t.refreshProgress;return{redirectToCover:function redirectToCover(){n&&n(),e.push({name:"practice-quiz-cover",params:e.params,query:e.location.query}),a()},addRedirectToCoverToRouteParams:function addRedirectToCoverToRouteParams(){e.push({name:"practice-quiz-attempt",params:e.params,query:{redirectToCover:!0}})},shouldRedirectToCover:e.location.query.redirectToCover}}));e.default=q(O)},Gpyo:function(module,e,t){"use strict";t.d(e,"a",function(){return p}),t.d(e,"c",function(){return g});var n=t("MVZn"),a=t.n(n),r=t("VkAN"),s=t.n(r),i=t("DXTi"),o=t.n(i),u=t("lTCR"),c=t.n(u),d=t("oJmH"),m=t.n(d),l=t("TUhR");function _templateObject2(){var e=s()(['\n  query practiceQuizDataQuery(\n    $itemId: String!\n    $userId: Int!\n    $slug: String!\n    $sessionId: String!\n    $body: String!\n    $skipFetchingResponses: Boolean!\n  ) {\n    practiceQuizQuestionData(itemId: $itemId, userId: $userId, slug: $slug, sessionId: $sessionId, body: $body)\n      @rest(\n        type: "RestPracticeQuizQuestionGetStateData"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/getState?autoEnroll=false"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          questions\n          nextSubmissionDraftId\n        }\n      }\n    }\n    practiceQuizQuestionResponses(itemId: $itemId, userId: $userId, slug: $slug, sessionId: $sessionId, body: $body)\n      @skip(if: $skipFetchingResponses)\n      @rest(\n        type: "RestPracticeQuizLatestSubmissionDraftResponse"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/getLatestSubmissionDraft?autoEnroll=false"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          draft\n        }\n      }\n    }\n  }\n']);return _templateObject2=function _templateObject2(){return e},e}function _templateObject(){var e=s()(['\n  query practiceQuizSessionMetaDataQuery($itemId: String!, $userId: Int!, $slug: String!, $body: String!) {\n    practiceQuizSessionMetaData(body: $body, itemId: $itemId, userId: $userId, slug: $slug)\n      @rest(\n        type: "RestPracticeQuizSessionMetadata"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizSessionDataResponseBody")\n    }\n  }\n']);return _templateObject=function _templateObject(){return e},e}var p={contentRequestBody:{argument:[]}},f={contentRequestBody:[]},I=c()(_templateObject()),g=c()(_templateObject2()),b=function PracticeQuizData(e){var t=e.slug,n=e.itemId,r=e.userId,s=e.fetchPolicy,i=void 0===s?"cache-first":s,u=e.examSessionId,c=e.children,m={slug:t,itemId:n,userId:r};return o.a.createElement(d.Query,{query:I,variables:a()({},m,{body:f}),fetchPolicy:i,skip:!!u},function(e){var t=e.loading,n=e.data,r=e.refetch;if(t&&!u)return c({loading:t});var s=u||((((n||{}).practiceQuizSessionMetaData||{}).contentResponseBody||{}).session||{}).id;return o.a.createElement(d.Query,{query:g,variables:a()({},m,{sessionId:s,body:p,skipFetchingResponses:!!u}),fetchPolicy:i},function(e){var t=e.loading,n=e.data,a=e.refetch,i=e.client;if(t)return c({loading:t});var o=(((n||{}).practiceQuizQuestionData||{}).contentResponseBody||{}).return,d=o.questions,m=o.nextSubmissionDraftId,p,f,I,g=((((((n||{}).practiceQuizQuestionResponses||{}).contentResponseBody||{}).return||{}).draft||{}).input||{}).responses,b=Object(l.a)(d,g,!!u),v=b.reduce(function(e,t){return e+t.prompt.weightedScoring.maxScore},0),y=!d[0].isSubmitAllowed,S,D;return c({loading:t,practiceQuizFormData:b,sessionId:s,totalPoints:v,isSubmitted:y,nextSubmissionDraftId:m,hasDraft:!!g,refetchPracticeQuizData:function refetchPracticeQuizData(){return r().then(function(){return a()})},client:i})})})};e.b=b},"a7+h":function(module,e,t){"use strict";t.d(e,"a",function(){return I});var n=t("VkAN"),a=t.n(n),r=t("DXTi"),s=t.n(r),i=t("lTCR"),o=t.n(i),u=t("oJmH"),c=t.n(u),d=t("kqcj");function _templateObject2(){var e=a()(['\n  mutation practiceQuizSubmitResponseActionMutation(\n    $itemId: String!\n    $userId: Int!\n    $slug: String!\n    $sessionId: String!\n    $body: String!\n  ) {\n    action(itemId: $itemId, userId: $userId, slug: $slug, sessionId: $sessionId, body: $body)\n      @rest(\n        type: "PracticeQuizSubmitResponseData"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/submitResponses?autoEnroll=false"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          nextSubmissionDraftId\n          evaluation\n          questions\n        }\n      }\n    }\n  }\n']);return _templateObject2=function _templateObject2(){return e},e}function _templateObject(){var e=a()(['\n  mutation practiceQuizSaveSubmissionDraftActionMutation(\n    $itemId: String!\n    $userId: Int!\n    $slug: String!\n    $sessionId: String!\n    $body: String!\n    $additionalParams: String!\n  ) {\n    action(\n      itemId: $itemId\n      userId: $userId\n      slug: $slug\n      sessionId: $sessionId\n      body: $body\n      additionalParams: $additionalParams\n    )\n      @rest(\n        type: "PracticeQuizSaveSubmissionDraftData"\n        path: "opencourse.v1/user/{args.userId}/course/{args.slug}/item/{args.itemId}/quiz/session/{args.sessionId}/action/saveSubmissionDraft?autoEnroll=false{args.additionalParams}"\n        method: "POST"\n        bodyKey: "body"\n      ) {\n      contentResponseBody @type(name: "RestPracticeQuizQuestionDataResponseBody") {\n        return @type(name: "RestContentResponseBodyReturnObject") {\n          nextSubmissionDraftId\n          questions @skip(if: $skipQuestionsField)\n          evaluation\n        }\n      }\n    }\n  }\n']);return _templateObject=function _templateObject(){return e},e}var m=o()(_templateObject()),l=o()(_templateObject2()),p=function SaveDraftMutation(e){var t=e||{},n=t.changedResponses,a=t.nextSubmissionDraftId,r=t.sessionId,i=t.userId,o=t.itemId,c=t.slug;return s.a.createElement(u.Mutation,{mutation:m,update:Object(d.a)(e)},function(t){var s={contentRequestBody:{argument:{id:a,input:{responses:n}}}},u=function saveDraft(){return t({variables:{body:s,sessionId:r,userId:i,itemId:o,slug:c,skipQuestionsField:!0,additionalParams:""}})},d=function autoSaveDraft(){return t({variables:{body:s,sessionId:r,userId:i,itemId:o,slug:c,skipQuestionsField:!0,additionalParams:"&isAutoSaving=true"}})};return e.children({saveDraft:u,autoSaveDraft:d})})},f=function SubmitDraftMutation(e){var t=e||{},n=t.changedResponses,a=t.sessionId,r=t.userId,i=t.itemId,o=t.slug;return s.a.createElement(u.Mutation,{mutation:l,update:Object(d.a)(e)},function(t){var s={contentRequestBody:{argument:{responses:n}}},u=function submitDraft(){return t({variables:{body:s,sessionId:a,userId:r,itemId:i,slug:o}})};return e.children({submitDraft:u})})},I=function PracticeQuizMutations(e){var t=e.ids,n=e.sessionId,a=e.itemId,r=e.courseId,i=e.changedResponses,o=e.children,u=e.slug,c=e.userId,d=e.nextSubmissionDraftId;return s.a.createElement(p,{changedResponses:i,nextSubmissionDraftId:d,sessionId:n,userId:c,itemId:a,slug:u},function(e){var t=e.saveDraft,r=e.autoSaveDraft;return s.a.createElement(f,{changedResponses:i,sessionId:n,userId:c,itemId:a,slug:u},function(e){var n=e.submitDraft;return o({saveDraft:t,autoSaveDraft:r,submitDraft:n})})})},g=I},glp6:function(module,e,t){"use strict";t.r(e);var n=t("DXTi"),a=t.n(n),r=t("zaiP"),s=t("JEIr"),i=t("sQ/U"),o=t("+871"),u=function SubmittedPracticeQuizAttemptPage(){return a.a.createElement(r.a,null,function(e){var t=e.item;if(!t||!t.contentSummary)return null;return a.a.createElement(s.a,{slug:t.courseSlug,itemId:t.id,userId:i.a.get().id},function(e){var n=e.loading,r=e.lastSessionId;if(!t||!t.contentSummary||n)return null;return a.a.createElement(o.default,{examSessionId:r})})})};e.default=u},kqcj:function(module,e,t){"use strict";var n=t("Gpyo"),a=function practiceQuizActionMutationUpdate(e){return function(t,a){var r=a.data,s=e.itemId,i=e.userId,o=e.slug,u=e.sessionId,c=(((r||{}).action||{}).contentResponseBody||{}).return||null,d=t.readQuery({query:n.c,variables:{itemId:s,userId:i,slug:o,sessionId:u,skipFetchingResponses:!1,body:n.a}}),m=(((d||{}).practiceQuizQuestionData||{}).contentResponseBody||{}).return||null;m&&(m.nextSubmissionDraftId=(c||{}).nextSubmissionDraftId||null,m.questions=(c||{}).questions||m.questions||null,m.evaluation=(c||{}).evaluation||null,t.writeQuery({query:n.c,variables:{itemId:s,userId:i,slug:o,sessionId:u,skipFetchingResponses:!1,body:n.a},data:d}))}};e.a=a},xmEj:function(module,e,t){"use strict";var n=t("DXTi"),a=t.n(n),r=t("agp5"),s=t("RH4a"),i=t("0n3a"),o=t("zaiP"),u=t("JEIr"),c=t("sQ/U"),d=t("wjH1"),m=t("a7+h"),l=function PracticeQuizActions(e){var t=e.ids,n=e.sessionId,l=e.children,p=e.nextSubmissionDraftId;return a.a.createElement(o.a,null,function(e){var o=e.item;if(!o)return null;var f=o.courseId,I=o.id,g=o.courseSlug;return a.a.createElement(u.a,{userId:c.a.get().id,itemId:I,slug:g},function(e){var u=e.refetch;return a.a.createElement(r.a,{ids:t},function(e){if(!e||!u)return l({});return a.a.createElement(s.a,{itemId:I,courseId:f},function(r){var s=r.stepState,b=r.setStepState,v=e.map(function(e){return{questionInstance:e.id,response:((e.response||{}).definition||{}).value}});return a.a.createElement(m.a,{ids:t,sessionId:n,itemId:I,courseId:f,slug:g,userId:c.a.get().id,changedResponses:v,nextSubmissionDraftId:p},function(t){var n=t.saveDraft,r=t.submitDraft,c=function saveDraft(){if(!s.isSaving&&!s.isSubmitting&&p)return b({isSaving:!0}),n().then(function(){return b({isSaving:!1})}).catch(function(e){return Object(d.a)(e,b)});return Promise.reject()},m=function autoSaveDraft(){if(!s.isAutoSaving&&!s.isSubmitting&&p)return b({isAutoSaving:!0}),n().then(function(){return b({isAutoSaving:!1})}).catch(function(e){return Object(d.a)(e,b)});return Promise.reject()},f=function refetchItemAndEvaluations(){return u().then(function(){return o.refetch()}).catch(function(e){return Object(d.a)(e,b)})},I=function submitDraft(){if(!s.isSubmitting)return b({isSubmitting:!0}),r().then(function(){return b({isSubmitting:!1})}).then(f).catch(function(e){return Object(d.a)(e,b)});return Promise.reject()};return a.a.createElement(i.a,{stepState:s,saveDraft:m,changedResponses:e},function(){return l({saveDraft:c,autoSaveDraft:m,submitDraft:I})})})})})})})};e.a=l}}]);
//# sourceMappingURL=86.c36bc87ab0ba683a78e7.js.map